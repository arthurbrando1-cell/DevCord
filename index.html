// Adicione isso ao seu HTML dentro da .input-wrapper
// <div id="record-btn" onclick="toggleRecording()" style="cursor:pointer">ðŸŽ¤</div>

let mediaRecorder;
let audioChunks = [];

async function toggleRecording() {
    if (!mediaRecorder || mediaRecorder.state === "inactive") {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        mediaRecorder = new MediaRecorder(stream);
        
        mediaRecorder.ondataavailable = (event) => audioChunks.push(event.data);
        
        mediaRecorder.onstop = async () => {
            const audioBlob = new Blob(audioChunks, { type: 'audio/mpeg' });
            audioChunks = [];
            // Aqui vocÃª faria o upload para o Firebase Storage
            const fileUrl = await uploadAudio(audioBlob); 
            sendAudioMessage(fileUrl);
        };

        mediaRecorder.start();
        document.getElementById('record-btn').style.color = "red"; // Indicador de gravando
    } else {
        mediaRecorder.stop();
        document.getElementById('record-btn').style.color = "white";
    }
}
